<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexify AI | Unified Global OS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --cb-blue: #0052ff; --bg: #000000; --glass-border: rgba(255,255,255,0.1); }
        body { background: var(--bg); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; overflow: hidden; height: 100vh; }
        .glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(40px); border: 1px solid var(--glass-border); }
        .page { display: none; height: calc(100vh - 120px); overflow-y: auto; padding-bottom: 120px; scroll-behavior: smooth; }
        .page-active { display: block; animation: pageFade 0.4s ease-out; }
        @keyframes pageFade { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        .btn-base { background: var(--cb-blue); border-radius: 14px; font-weight: 800; transition: all 0.2s; }
        .btn-base:active { transform: scale(0.95); opacity: 0.9; }
        .nav-active { color: var(--cb-blue); border-top: 3px solid var(--cb-blue); font-weight: 800; }
        .nexify-card { background: linear-gradient(135deg, #0052ff 0%, #001e5e 100%); border-radius: 24px; border: 1px solid rgba(255,255,255,0.2); }
        input, textarea, select { background: #0a0b0d; border: 1px solid #1e232d; border-radius: 12px; padding: 12px; color: white; outline: none; width: 100%; font-size: 14px; }
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 15px; margin-top: 10px; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    </style>
</head>
<body>

    <div id="loader" class="fixed inset-0 z-[2000] bg-black/95 hidden flex flex-col items-center justify-center">
        <div class="w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div>
        <p id="loader-msg" class="mt-4 text-[10px] font-black uppercase tracking-[0.4em] text-blue-500">Syncing Global Node...</p>
    </div>

    <div id="settings-modal" class="fixed inset-0 z-[1500] bg-black hidden p-8 overflow-y-auto">
        <div class="max-w-md mx-auto space-y-8 pt-6">
            <div class="flex justify-between items-center">
                <h2 class="text-3xl font-black italic uppercase">System</h2>
                <button onclick="ui.modal('settings-modal', false)" class="text-2xl text-gray-500">‚úï</button>
            </div>
            <div class="space-y-6">
                <div><label class="text-[10px] text-gray-500 font-bold uppercase mb-2 block">Display Handle</label>
                <input type="text" id="user-name" placeholder="@username"></div>
                <div><label class="text-[10px] text-gray-500 font-bold uppercase mb-2 block">Announcement (Admin Only)</label>
                <textarea id="admin-msg" placeholder="Broadcast to all users..."></textarea></div>
                <button onclick="core.saveSettings()" class="w-full py-4 btn-base text-xs uppercase tracking-widest">Update Protocol</button>
            </div>
        </div>
    </div>

    <header class="p-6 flex justify-between items-center border-b border-white/5 sticky top-0 z-50 bg-black/90 backdrop-blur-md">
        <div class="flex flex-col">
            <span class="text-[10px] font-black text-blue-500 tracking-widest">NEXIFY HUB v1.0</span>
            <span id="header-addr" class="text-[11px] font-bold text-gray-600 italic">0x...</span>
        </div>
        <div class="flex items-center gap-4">
            <div class="bg-blue-600/10 px-4 py-2 rounded-full text-[11px] font-black text-blue-500 border border-blue-600/20">üíé <span id="pts-val">0.0</span></div>
            <button onclick="ui.modal('settings-modal', true)" class="text-xl">‚öôÔ∏è</button>
        </div>
    </header>

    <main class="max-w-xl mx-auto px-6 pt-4">
        
        <section id="page-wealth" class="page page-active space-y-6">
            <div class="nexify-card p-8 shadow-2xl relative">
                <p class="text-[10px] font-black uppercase opacity-60 mb-2">Portfolio Value</p>
                <h1 id="total-usd" class="text-6xl font-black tracking-tighter mb-8">$0.00</h1>
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="engine.tx('Fiat Deposit')" class="bg-white text-black py-4 rounded-xl text-[10px] font-black uppercase">Add Funds</button>
                    <button onclick="engine.tx('Asset Swap')" class="glass py-4 rounded-xl text-[10px] font-black uppercase">Swap L2</button>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-3">
                <div class="glass p-4 rounded-2xl flex flex-col items-center gap-2 cursor-pointer" onclick="engine.tx('Google Play')">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Google_Pay_Logo.svg" class="h-3">
                    <span class="text-[8px] font-bold text-gray-500 uppercase">Google</span>
                </div>
                <div class="glass p-4 rounded-2xl flex flex-col items-center gap-2 cursor-pointer" onclick="engine.tx('Card Payment')">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" class="h-3 brightness-200">
                    <span class="text-[8px] font-bold text-gray-500 uppercase">Master/Visa</span>
                </div>
                <div class="glass p-4 rounded-2xl flex flex-col items-center gap-2 cursor-pointer" onclick="engine.tx('Freelancer Portal')">
                    <span class="text-[8px] font-black">SKRILL / PAYONEER</span>
                    <span class="text-[8px] font-bold text-gray-500 uppercase">Freelancer</span>
                </div>
            </div>

            <div class="glass p-8 rounded-[35px] border-blue-600/20 text-center">
                <p class="text-[10px] font-black text-blue-400 uppercase tracking-widest mb-4 italic">Base Mainnet Miner: +0.1 PTS</p>
                <button onclick="core.claim()" id="claim-btn" class="w-full py-5 btn-base text-xs uppercase tracking-widest shadow-xl shadow-blue-600/30">Activate Cycle</button>
            </div>
        </section>

        <section id="page-gigs" class="page space-y-6">
            <div class="flex justify-between items-center">
                <h2 class="text-xs font-black uppercase text-gray-500">Missions & Jobs</h2>
                <button onclick="alert('Open Job Poster')" class="text-[10px] font-black text-blue-500">+ POST GIG</button>
            </div>
            <div id="jobs-container" class="space-y-4">
                <div class="glass p-6 rounded-[25px] border-l-4 border-blue-600">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-sm font-black">Mobile App Security Audit</h3>
                        <span class="text-xs font-black text-blue-500">1200 USDC</span>
                    </div>
                    <p class="text-xs text-gray-500 leading-relaxed mb-4">Secure our smart contract and frontend on Base...</p>
                    <button class="w-full py-3 glass rounded-xl text-[9px] font-black uppercase hover:bg-white hover:text-black transition">Apply for Mission</button>
                </div>
            </div>
        </section>

        <section id="page-social" class="page space-y-4">
            <div class="glass p-6 rounded-[30px] border-white/5 space-y-4">
                <textarea id="p-txt" placeholder="Share Alpha or Video URL..." class="h-16"></textarea>
                <div class="flex justify-end"><button onclick="social.post()" class="btn-base px-10 py-3 text-[10px] uppercase">Broadcast</button></div>
            </div>
            <div id="feed-cont" class="space-y-5 pb-24"></div>
        </section>

    </main>

    <nav class="fixed bottom-0 inset-x-0 glass px-12 py-8 flex justify-between items-center z-50 rounded-t-[45px] bg-black/95">
        <button onclick="ui.nav('wealth')" id="n-wealth" class="nav-active text-[10px] font-black uppercase">Wealth</button>
        <button onclick="ui.nav('gigs')" id="n-gigs" class="text-gray-500 text-[10px] font-black uppercase">Gigs</button>
        <button onclick="ui.nav('social')" id="n-social" class="text-gray-500 text-[10px] font-black uppercase">Social</button>
    </nav>

    <script>
        // Global Config
        const firebaseConfig = { databaseURL: "https://nexify-ai-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let session = { pts: 0.0, addr: "0x" + Math.random().toString(16).slice(2, 10).toUpperCase(), name: "Guest_Node" };

        const core = {
            init() {
                document.getElementById('header-addr').innerText = session.addr;
                social.load();
                jobs.load();
            },
            claim() {
                session.pts = parseFloat((session.pts + 0.1).toFixed(1));
                document.getElementById('pts-val').innerText = session.pts.toFixed(1);
                document.getElementById('total-usd').innerText = "$" + (session.pts * 10).toFixed(2);
                document.getElementById('claim-btn').disabled = true;
                document.getElementById('claim-btn').innerText = "LIMIT REACHED (24H)";
                alert("0.1 Points successfully mined on Base Layer.");
            },
            saveSettings() {
                const name = document.getElementById('user-name').value;
                if(name) session.name = name;
                const adminMsg = document.getElementById('admin-msg').value;
                if(adminMsg) {
                    db.ref('posts').push({ author: "ADMIN_ALPHA", content: "üì¢ " + adminMsg, time: Date.now() });
                }
                ui.modal('settings-modal', false);
            }
        };

        const social = {
            extractVideo(url) {
                const yt = /(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
                let m = url.match(yt); if(m) return m[1]; return null;
            },
            post() {
                const txt = document.getElementById('p-txt').value;
                if(!txt) return;
                const vidId = this.extractVideo(txt);
                db.ref('posts').push({
                    author: session.name,
                    content: txt,
                    video: vidId,
                    time: Date.now()
                });
                document.getElementById('p-txt').value = "";
            },
            load() {
                db.ref('posts').limitToLast(15).on('value', snap => {
                    const cont = document.getElementById('feed-cont'); cont.innerHTML = "";
                    snap.forEach(c => {
                        const p = c.val();
                        let vHtml = p.video ? `<div class="video-container"><iframe src="https://www.youtube.com/embed/${p.video}" frameborder="0" allowfullscreen></iframe></div>` : '';
                        cont.innerHTML += `
                            <div class="glass p-6 rounded-[30px] border-white/5">
                                <p class="text-[9px] font-black text-blue-500 uppercase mb-2">@${p.author}</p>
                                <p class="text-sm text-gray-300 leading-relaxed">${p.content}</p>
                                ${vHtml}
                                <div class="flex gap-6 mt-4 text-[10px] font-bold text-gray-600">
                                    <button onclick="alert('Point Tipped!')">‚ù§Ô∏è LIKE</button>
                                    <button>üí¨ COMMENT</button>
                                    <button onclick="alert('Transaction Bridged!')">‚ö° TIP</button>
                                </div>
                            </div>`;
                    });
                });
            }
        };

        const jobs = {
            load() {
                // Static jobs for demo, but can be pulled from Firebase 'jobs'
            }
        };

        const engine = {
            tx(type) {
                ui.loader(true, `Processing ${type} via Base L2...`);
                setTimeout(() => { ui.loader(false); alert(`${type} Successful. Minimum Gas Fee Applied.`); }, 2000);
            }
        };

        const ui = {
            nav(tab) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('page-active'));
                document.getElementById('page-' + tab).classList.add('page-active');
                ['wealth', 'gigs', 'social'].forEach(t => {
                    document.getElementById('n-' + t).className = (t === tab) ? "nav-active text-[10px] font-black uppercase" : "text-gray-500 text-[10px] font-black uppercase";
                });
            },
            modal(id, show) { document.getElementById(id).style.display = show ? 'block' : 'none'; },
            loader(show, msg) {
                document.getElementById('loader').style.display = show ? 'flex' : 'none';
                document.getElementById('loader-msg').innerText = msg;
            }
        };

        core.init();
    </script>
</body>
</html>
