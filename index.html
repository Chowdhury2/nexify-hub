<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexify | Sovereign Base OS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    
    <style>
        :root { --base: #0052ff; --bg: #000; }
        body { background: var(--bg); color: #fff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto; overflow: hidden; height: 100vh; }
        .glass { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); }
        .page { display: none; height: calc(100vh - 90px); overflow-y: scroll; -webkit-overflow-scrolling: touch; }
        .page-active { display: block; animation: fadeIn 0.2s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .btn-smart { background: var(--base); border-radius: 12px; font-weight: 700; transition: 0.2s; border: none; cursor: pointer; }
        .nav-item { opacity: 0.4; flex: 1; text-align: center; padding: 15px 0; font-size: 20px; }
        .nav-active { opacity: 1; color: var(--base); border-top: 3px solid var(--base); }
        input, select { background: #111; border: 1px solid #222; border-radius: 12px; padding: 12px; color: #fff; width: 100%; }
        /* Optimized for Slow Net */
        img { content-visibility: auto; }
    </style>
</head>
<body>

    <div id="auth-screen" class="fixed inset-0 z-[9999] bg-black flex flex-col items-center justify-center p-8">
        <div class="w-16 h-16 bg-blue-600 rounded-2xl mb-6 shadow-2xl shadow-blue-500/20"></div>
        <h1 class="text-4xl font-black italic tracking-tighter mb-2">NEXIFY</h1>
        <p class="text-gray-500 text-[10px] uppercase tracking-widest mb-12">Universal Web3 Protocol</p>
        
        <div class="w-full max-w-xs space-y-3">
            <button onclick="auth.social()" class="w-full py-4 glass rounded-xl flex items-center justify-center gap-3 text-xs font-bold uppercase">
                Google / Twitter Sign-in
            </button>
            <button onclick="auth.web3()" class="w-full py-4 btn-smart text-xs uppercase">Connect Wallet</button>
        </div>
    </div>

    <div id="app-content" class="hidden">
        <header class="p-4 flex justify-between items-center bg-black/80 sticky top-0 z-50">
            <div class="flex items-center gap-2">
                <div id="u-pfp" class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-[10px] font-bold">NX</div>
                <span id="u-name" class="text-[11px] font-bold">@USER</span>
            </div>
            <div class="flex items-center gap-2">
                <span id="pts-display" class="text-blue-500 font-bold">0.00</span>
                <span class="text-[10px] bg-white/10 px-2 py-1 rounded">üíé</span>
            </div>
        </header>

        <main>
            <section id="p-assets" class="page page-active p-4">
                <div class="glass p-8 rounded-[30px] mb-6 text-center">
                    <p class="text-[10px] text-gray-500 uppercase font-bold mb-1">Unified Balance</p>
                    <h1 id="usd-display" class="text-5xl font-black mb-6">$0.00</h1>
                    <div class="flex gap-2">
                        <button onclick="ui.modal('tx-modal', true)" class="flex-1 py-3 btn-smart text-[10px] uppercase">Instant Send</button>
                        <button onclick="ui.modal('gift-modal', true)" class="flex-1 py-3 glass rounded-xl text-[10px] uppercase">Gift Bridge</button>
                    </div>
                </div>

                <div class="space-y-3">
                    <div class="glass p-4 rounded-2xl flex justify-between items-center">
                        <div><p class="text-[10px] font-bold">Cloud Node Mining (10GB)</p><p class="text-[8px] text-green-500">Live: 0.05 NX/hr</p></div>
                        <button onclick="core.claim()" class="text-[10px] font-bold text-blue-500">CLAIM</button>
                    </div>
                </div>
            </section>

            <section id="p-feed" class="page p-4">
                <div class="glass p-4 rounded-2xl mb-4">
                    <textarea id="post-input" class="w-full bg-transparent border-none text-sm outline-none resize-none" placeholder="What's happening?"></textarea>
                    <div class="flex justify-end mt-2"><button onclick="core.cast()" class="px-5 py-2 btn-smart text-[10px]">CAST</button></div>
                </div>
                <div id="feed-container" class="space-y-4"></div>
            </section>

            <section id="p-gigs" class="page p-4">
                <div id="gig-list" class="space-y-4"></div>
            </section>

            <section id="p-settings" class="page p-4">
                <div class="glass p-6 rounded-2xl mb-4 space-y-4">
                    <p class="text-xs font-bold text-blue-500 uppercase">Connect & Earn (0.1 NX)</p>
                    <button onclick="core.link('X')" class="w-full py-3 glass rounded-xl text-[10px] flex justify-between px-4 items-center">Connect Twitter <span>+0.1 NX</span></button>
                    <button onclick="core.link('TG')" class="w-full py-3 glass rounded-xl text-[10px] flex justify-between px-4 items-center">Connect Telegram <span>+0.1 NX</span></button>
                </div>
                <div class="glass p-6 rounded-2xl space-y-4">
                    <p class="text-xs font-bold uppercase">Security</p>
                    <div class="flex justify-between text-xs"><span>Biometric Authentication</span> <input type="checkbox" checked class="w-4"></div>
                    <button onclick="auth.out()" class="w-full py-3 text-red-500 text-xs font-bold">Sign Out</button>
                </div>
            </section>
        </main>

        <nav class="fixed bottom-0 inset-x-0 glass bg-black/95 flex justify-around items-center z-[100] border-t border-white/5">
            <button onclick="ui.nav('assets')" class="nav-item nav-active">üè¶</button>
            <button onclick="ui.nav('feed')" class="nav-item">üí¨</button>
            <button onclick="ui.nav('gigs')" class="nav-item">üíº</button>
            <button onclick="ui.nav('settings')" class="nav-item">‚öôÔ∏è</button>
        </nav>
    </div>

    <div id="tx-modal" class="fixed inset-0 z-[10000] bg-black/95 hidden flex items-center justify-center p-8">
        <div class="w-full max-w-xs glass p-8 rounded-3xl space-y-4">
            <h3 class="text-center font-bold">Transfer Fund</h3>
            <input type="text" placeholder="Username / Address">
            <input type="number" placeholder="Amount ($)">
            <p class="text-[8px] text-center text-gray-500">Protocol Fee: 1% (Founder Profit)</p>
            <button onclick="ui.modal('tx-modal', false)" class="w-full py-4 btn-smart text-xs">Send Instantly</button>
        </div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyBdiU4hxYXMPdvuYeWm21oMLoyoT9X14eM", authDomain: "nexify-ai-a1caa.firebaseapp.com", projectId: "nexify-ai-a1caa", storageBucket: "nexify-ai-a1caa.firebasestorage.app", messagingSenderId: "46706090864", appId: "1:46706090864:web:451271fda84fbd938de5b5" };
        firebase.initializeApp(firebaseConfig);
        const authRef = firebase.auth(); const db = firebase.firestore();

        const auth = {
            social() { authRef.signInWithPopup(new firebase.auth.GoogleAuthProvider()).then(res => this.init(res.user)); },
            web3() { this.init({displayName: 'BaseUser', uid: '0xWeb3'}); },
            init(user) {
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('app-content').classList.remove('hidden');
                core.sync(user);
            },
            out() { authRef.signOut().then(() => location.reload()); }
        };

        const core = {
            sync(user) {
                db.collection('users').doc(user.uid).onSnapshot(doc => {
                    if(!doc.exists) db.collection('users').doc(user.uid).set({ name: user.displayName, pts: 0.1 });
                    const d = doc.data();
                    document.getElementById('u-name').innerText = "@" + d.name.split(' ')[0].toUpperCase();
                    document.getElementById('pts-display').innerText = d.pts.toFixed(2);
                    document.getElementById('usd-display').innerText = "$" + d.pts.toFixed(2);
                });
                this.loadFeed(); this.loadGigs();
            },
            claim() { db.collection('users').doc(authRef.currentUser.uid).update({ pts: firebase.firestore.FieldValue.increment(0.01) }); },
            link(p) { this.claim(); alert(p + " Linked! +0.1 NX Reward."); },
            cast() {
                const text = document.getElementById('post-input').value;
                if(text) db.collection('posts').add({ text, user: document.getElementById('u-name').innerText, time: Date.now() });
            },
            loadFeed() {
                db.collection('posts').orderBy('time', 'desc').onSnapshot(snap => {
                    const cont = document.getElementById('feed-container'); cont.innerHTML = '';
                    snap.forEach(doc => { const p = doc.data();
                        cont.innerHTML += `<div class="glass p-4 rounded-2xl"><p class="text-[10px] font-bold text-blue-500">${p.user}</p><p class="text-sm mt-1">${p.text}</p></div>`;
                    });
                });
            },
            loadGigs() {
                db.collection('gigs').onSnapshot(snap => {
                    const cont = document.getElementById('gig-list'); cont.innerHTML = '';
                    snap.forEach(doc => { const g = doc.data();
                        cont.innerHTML += `<div class="glass p-4 rounded-2xl flex justify-between items-center"><div><p class="text-sm font-bold">${g.title}</p><p class="text-[9px] text-gray-500">$${g.price}</p></div><button class="px-4 py-2 btn-smart text-[10px]">HIRE</button></div>`;
                    });
                });
            }
        };

        const ui = {
            nav(id) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('page-active'));
                document.getElementById('p-'+id).classList.add('page-active');
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('nav-active'));
                event.currentTarget.classList.add('nav-active');
            },
            modal(id, show) { document.getElementById(id).style.display = show ? 'flex' : 'none'; }
        };

        authRef.onAuthStateChanged(u => { if(u) auth.init(u); });
    </script>
</body>
</html>
