<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexify Sovereign | Testing Lab</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        body { background: #000; color: #fff; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }
        .page { display: none; height: 100vh; overflow-y: auto; padding: 90px 16px 130px 16px; }
        .active-page { display: block; animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .nx-glass { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; }
        .nav-dock { position: fixed; bottom: 20px; left: 10px; right: 10px; height: 80px; background: rgba(10,10,10,0.95); backdrop-filter: blur(15px); border-radius: 40px; border: 1px solid #1a1a1a; display: flex; justify-content: space-around; align-items: center; z-index: 5000; }
        .nav-item { color: #555; text-align: center; font-size: 20px; cursor: pointer; }
        .nav-item.active { color: #0052ff; }
        .nav-item p { font-size: 7px; font-weight: 800; text-transform: uppercase; margin-top: 4px; }
    </style>
</head>
<body>

    <header class="fixed top-0 inset-x-0 p-5 z-[4000] flex justify-between items-center bg-black/80 backdrop-blur-lg border-b border-white/5">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl bg-[#0052ff] flex items-center justify-center font-black italic shadow-lg shadow-blue-600/20">N</div>
            <div>
                <h1 class="text-[10px] font-black uppercase tracking-widest">Nexify Testnet</h1>
                <p id="net-status" class="text-[7px] text-gray-500 font-bold uppercase">Ready to Sync</p>
            </div>
        </div>
        <button id="connectBtn" onclick="testEngine.sync()" class="px-5 py-2 rounded-xl bg-white text-black text-[9px] font-black uppercase tracking-widest">Link ID</button>
    </header>

    <main>
        <section id="p-home" class="page active-page space-y-5">
            <div class="nx-glass p-5">
                <textarea id="postInput" class="w-full bg-transparent border-none outline-none text-sm h-14" placeholder="আপনার অন-চেইন আপডেট লিখুন..."></textarea>
                <button onclick="testEngine.post()" class="w-full bg-[#0052ff] py-2 rounded-xl text-[9px] font-black uppercase mt-2">Broadcast On Base</button>
            </div>
            <div id="feed-list" class="space-y-4"></div>
        </section>

        <section id="p-trade" class="page space-y-5">
            <div class="nx-glass p-8 text-center">
                <p class="text-[9px] text-blue-500 font-bold uppercase mb-2 tracking-widest">Real-time Base Assets</p>
                <h2 id="livePrice" class="text-4xl font-black">$2,450.00</h2>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <button class="bg-green-600 p-4 rounded-2xl font-black text-[10px] uppercase shadow-lg shadow-green-900/20">Buy / Long</button>
                <button class="bg-red-600 p-4 rounded-2xl font-black text-[10px] uppercase shadow-lg shadow-red-900/20">Sell / Short</button>
            </div>
            <div class="nx-glass p-6 space-y-3">
                <p class="text-[10px] font-black text-gray-500 uppercase">Payment Methods</p>
                <button onclick="testEngine.buy()" class="w-full py-4 bg-white text-black rounded-xl font-black text-[10px] uppercase">Credit Card On-Ramp</button>
                <button onclick="alert('Gift Card Portal Loading...')" class="w-full py-4 bg-zinc-800 rounded-xl font-black text-[10px] uppercase">Redeem Gift Card</button>
            </div>
        </section>

        <section id="p-shop" class="page text-center">
            <div class="mt-20 opacity-50">
                <i class="fa-solid fa-cart-flatbed text-5xl text-blue-600 mb-6"></i>
                <h2 class="text-xl font-black uppercase">Sovereign Mall</h2>
                <p class="text-xs text-gray-500 mt-2 px-10">আপনার অন-চেইন ব্যালেন্স দিয়ে শপিং করার সিস্টেমটি ডেভেলপ করা হচ্ছে। শীঘ্রই লঞ্চ হবে।</p>
            </div>
        </section>

        <section id="p-vault" class="page space-y-5 text-center">
            <div class="nx-glass p-12">
                <p class="text-[9px] text-gray-500 font-black uppercase mb-2 tracking-widest">Your Net Worth</p>
                <h2 id="balanceDisp" class="text-5xl font-black tracking-tighter">$0.00</h2>
                <p id="walletAddr" class="text-[7px] font-mono text-blue-500 mt-6 truncate px-10"></p>
            </div>
            <div class="flex gap-3">
                <button class="flex-1 py-4 bg-zinc-900 rounded-2xl font-black text-[10px] uppercase">Send</button>
                <button class="flex-1 py-4 bg-blue-600 rounded-2xl font-black text-[10px] uppercase">Receive</button>
            </div>
        </section>
    </main>

    <nav class="nav-dock">
        <div onclick="ui.nav('home', this)" class="nav-item active"><i class="fa-solid fa-compass"></i><p>Hub</p></div>
        <div onclick="ui.nav('trade', this)" class="nav-item"><i class="fa-solid fa-shuffle"></i><p>Trade</p></div>
        <div onclick="ui.nav('shop', this)" class="nav-item"><i class="fa-solid fa-bag-shopping"></i><p>Shop</p></div>
        <div onclick="ui.nav('vault', this)" class="nav-item"><i class="fa-solid fa-wallet"></i><p>Vault</p></div>
    </nav>

    <script>
        const ui = {
            nav(id, el) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
                document.getElementById('p-'+id).classList.add('active-page');
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                el.classList.add('active');
            }
        };

        const testEngine = {
            state: { address: null },
            
            async sync() {
                if (window.ethereum) {
                    try {
                        const provider = new ethers.BrowserProvider(window.ethereum);
                        const accounts = await provider.send("eth_requestAccounts", []);
                        this.state.address = accounts[0];
                        
                        document.getElementById('connectBtn').innerText = accounts[0].substring(0,6) + '...';
                        document.getElementById('walletAddr').innerText = accounts[0];
                        document.getElementById('net-status').innerText = "Linked to Base Mainnet";
                        document.getElementById('net-status').style.color = "#00ff88";
                        
                        const balance = await provider.getBalance(accounts[0]);
                        document.getElementById('balanceDisp').innerText = "$" + (parseFloat(ethers.formatEther(balance)) * 2450).toFixed(2);
                        
                        alert("টেস্ট সাকসেসফুল! আপনার ওয়ালেট এখন লাইভ অন-চেইন কানেক্টেড।");
                    } catch (err) { alert("কানেকশন এরর: " + err.message); }
                } else { alert("দয়া করে Coinbase Wallet ব্যবহার করুন।"); }
            },

            post() {
                const txt = document.getElementById('postInput').value;
                if(!txt) return;
                const feed = document.getElementById('feed-list');
                const post = document.createElement('div');
                post.className = "nx-glass p-5 animate-pulse";
                post.innerHTML = `<p class="text-[9px] font-black text-blue-500 uppercase mb-2">Transaction Broadcasted</p><p class="text-sm font-light">${txt}</p>`;
                feed.prepend(post);
                document.getElementById('postInput').value = '';
                setTimeout(() => post.classList.remove('animate-pulse'), 1000);
            },

            buy() { alert("Coinbase Pay Gateway Loading... এটি লাইভ লঞ্চের পর সরাসরি কাজ করবে।"); }
        };

        window.onload = () => {
            document.getElementById('feed-list').innerHTML = `<div class="nx-glass p-5"><p class="text-sm">সিস্টেম রেডি। চেক করার জন্য 'Link ID' বাটনে ক্লিক করুন।</p></div>`;
        }
    </script>
</body>
</html>
