<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexify AI | Unified OS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    
    <style>
        :root { --cb-blue: #0052ff; --bg: #000; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; overflow: hidden; height: 100vh; }
        .glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
        .page { display: none; height: 100vh; overflow-y: auto; padding: 20px; }
        .page-active { display: flex; flex-direction: column; }
        input { background: #111; border: 1px solid #333; border-radius: 12px; padding: 15px; color: white; width: 100%; margin-bottom: 15px; outline: none; }
        .btn-blue { background: var(--cb-blue); padding: 15px; border-radius: 12px; font-weight: bold; width: 100%; text-transform: uppercase; }
    </style>
</head>
<body>

    <div id="auth-page" class="page page-active items-center justify-center">
        <h1 class="text-4xl font-black text-blue-500 mb-8 tracking-tighter italic text-center">NEXIFY AI</h1>
        
        <div class="w-full max-w-sm space-y-2">
            <input type="email" id="email" placeholder="Email Address">
            <input type="password" id="pass" placeholder="Password (min 8 chars)">
            
            <button onclick="handleAuth('login')" class="btn-blue text-sm">Login</button>
            <button onclick="handleAuth('signup')" class="w-full py-4 glass rounded-xl text-xs font-bold uppercase mb-4">Create Account</button>
            
            <div class="flex items-center gap-4 py-4 text-gray-600 text-[10px] font-bold">
                <div class="h-[1px] bg-gray-800 flex-1"></div> OR <div class="h-[1px] bg-gray-800 flex-1"></div>
            </div>

            <button onclick="socialLogin('google')" class="w-full py-3 glass rounded-xl text-[10px] font-bold uppercase flex items-center justify-center gap-2">
                Google Login
            </button>
        </div>
    </div>

    <div id="main-app" class="page items-center justify-center">
        <div class="glass p-10 rounded-[40px] text-center w-full max-w-sm">
            <p class="text-[10px] text-blue-500 font-bold uppercase mb-2">Welcome Back</p>
            <h2 id="user-display" class="text-2xl font-black mb-6">User Node</h2>
            <div class="bg-blue-600/10 p-4 rounded-2xl border border-blue-500/20 mb-6">
                <p class="text-[10px] text-gray-500 uppercase font-bold">Wallet Points</p>
                <h3 class="text-3xl font-black text-blue-500">ðŸ’Ž <span id="pts">0.0</span></h3>
            </div>
            <button onclick="logout()" class="text-red-500 text-[10px] font-bold uppercase tracking-widest">Logout</button>
        </div>
    </div>

    <script>
        // à¦†à¦ªà¦¨à¦¾à¦° Firebase Config à¦à¦–à¦¾à¦¨à§‡ à¦¬à¦¸à¦¾à¦¨ (à¦ªà§à¦°à¦œà§‡à¦•à§à¦Ÿ à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸ à¦¥à§‡à¦•à§‡ à¦ªà¦¾à¦¬à§‡à¦¨)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Authentication Logic
        async function handleAuth(type) {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;

            if (!email || !pass) {
                alert("Please fill all fields!");
                return;
            }

            try {
                if (type === 'signup') {
                    const res = await auth.createUserWithEmailAndPassword(email, pass);
                    // à¦¨à¦¤à§à¦¨ à¦‡à¦‰à¦œà¦¾à¦°à§‡à¦° à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦¤à§ˆà¦°à¦¿
                    await db.collection('users').doc(res.user.uid).set({
                        email: email,
                        pts: 0.0,
                        storage: 10.0,
                        name: email.split('@')[0]
                    });
                    alert("Account Created Successfully!");
                } else {
                    await auth.signInWithEmailAndPassword(email, pass);
                }
            } catch (error) {
                alert(error.message);
            }
        }

        // Social Login
        function socialLogin(providerType) {
            let provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).catch(e => alert(e.message));
        }

        // Auth State Observer (à¦²à¦—à¦‡à¦¨ à¦•à¦°à¦¾ à¦¥à¦¾à¦•à¦²à§‡ à¦…à¦Ÿà§‹à¦®à§‡à¦Ÿà¦¿à¦• à¦…à§à¦¯à¦¾à¦ªà§‡ à¦¨à¦¿à§Ÿà§‡ à¦¯à¦¾à¦¬à§‡)
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('auth-page').classList.remove('page-active');
                document.getElementById('main-app').classList.add('page-active');
                
                db.collection('users').doc(user.uid).onSnapshot(doc => {
                    if (doc.exists) {
                        document.getElementById('user-display').innerText = doc.data().name.toUpperCase();
                        document.getElementById('pts').innerText = doc.data().pts.toFixed(1);
                    }
                });
            } else {
                document.getElementById('auth-page').classList.add('page-active');
                document.getElementById('main-app').classList.remove('page-active');
            }
        });

        function logout() {
            auth.signOut();
        }
    </script>
</body>
</html>
